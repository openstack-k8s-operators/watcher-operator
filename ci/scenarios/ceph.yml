---
cifmw_edpm_deploy_hci: true
cifmw_ceph_daemons_layout:
  rgw_enabled: true
  dashboard_enabled: true
  cephfs_enabled: true
  ceph_nfs_enabled: true
# Override the Ceph container tag and deploy Squid
cifmw_cephadm_container_tag: "v19"
# Override the Ceph Tools repo and install cephadm Squid
cifmw_cephadm_repository_override: true
cifmw_cephadm_version: "squid"
cifmw_cephadm_prepare_host: true
cifmw_services_manila_enabled: false
cifmw_hci_prepare_extra_services:
  - telemetry

# NOTE(jgilaber): we might want to merge this file into scenarios/edpm.yml,
# # depending on how many jobs will have cinder volumes enabled
ci_framework_base_src_dir: "{{ ansible_user_dir  }}/{{ zuul.projects['github.com/openstack-k8s-operators/ci-framework'].src_dir  }}"
install_yamls_src_dir: "{{ ansible_user_dir }}/{{ zuul.projects['github.com/openstack-k8s-operators/install_yamls'].src_dir }}"
post_deploy:
  - name: Download needed tools
    type: playbook
    inventory: "{{ install_yamls_src_dir }}/devsetup/hosts"
    source: "{{ install_yamls_src_dir }}/devsetup/download_tools.yaml"
  - name: Patch Openstack Prometheus to enable admin API
    type: playbook
    source: "{{ prometheus_admin_api_hook }}"
  - name: 81 Kustomize OpenStack CR with Ceph
    type: playbook
    source: "{{ ci_framework_base_src_dir }}/hooks/playbooks/control_plane_ceph_backends.yml"
  - name: 82 Kustomize and update Control Plane
    type: playbook
    source: "{{ ci_framework_base_src_dir }}/hooks/playbooks/control_plane_kustomize_deploy.yml"

# jgilaber: override hook defined in ci-framework that we don't need
pre_tests: []
