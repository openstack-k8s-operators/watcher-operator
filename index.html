<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="generator" content="Asciidoctor 2.0.26"/>
<title>Watcher Operator documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"/>
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/monokai.min.css"/>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Watcher Operator documentation</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_developer_documentation">Developer Documentation</a>
<ul class="sectlevel2">
<li><a href="#_description">Description</a></li>
<li><a href="#_getting_started">Getting Started</a>
<ul class="sectlevel3">
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_to_deploy_on_the_cluster">To Deploy on the cluster</a></li>
<li><a href="#_to_uninstall">To Uninstall</a></li>
<li><a href="#_to_deploy_via_olm">To Deploy via OLM</a></li>
<li><a href="#_to_uninstall_olm_deployed_watcher_operator">To Uninstall OLM deployed watcher-operator</a></li>
</ul>
</li>
<li><a href="#_project_distribution">Project Distribution</a></li>
<li><a href="#_contributing">Contributing</a></li>
<li><a href="#_license">License</a></li>
</ul>
</li>
<li><a href="#_user_installation_guide">User Installation Guide</a>
<ul class="sectlevel2">
<li><a href="#_watcher_operator_installation">Watcher operator installation</a></li>
<li><a href="#_watcher_service_deployment">Watcher service deployment</a></li>
</ul>
</li>
<li><a href="#_example_workflow">Example Workflow</a>
<ul class="sectlevel2">
<li><a href="#_requirements">Requirements</a></li>
<li><a href="#_watcher_workflow_cli">Watcher Workflow (CLI)</a>
<ul class="sectlevel3">
<li><a href="#_optimization_scenario_i_instances_consolidation_in_minimal_compute_nodes">Optimization Scenario I: Instances Consolidation in Minimal Compute Nodes</a></li>
</ul>
</li>
<li><a href="#_watcher_workflow_horizon_dashboard_ui">Watcher Workflow (Horizon Dashboard UI)</a>
<ul class="sectlevel3">
<li><a href="#_optimization_scenario_ii_workload_balancingstabilization">Optimization Scenario II: Workload balancing/stabilization</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_developer_documentation">Developer Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The watcher-operator is an OpenShift Operator built using the Operator Framework
for Go. The Operator provides a way to install and manage the <a href="https://docs.openstack.org/watcher/latest/">OpenStack Watcher service</a> on OpenShift.
This Operator is developed using RDO containers for OpenStack.</p>
</div>
<div class="sect2">
<h3 id="_description">Description</h3>
<div class="paragraph">
<p>This operator is built using the operator-sdk framework to provide day one
and day two lifecycle managment of the OpenStack Watcher service on an OpenShift cluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started">Getting Started</h3>
<div class="sect3">
<h4 id="_prerequisites">Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>go version v1.22.0+</p>
</li>
<li>
<p>docker version 17.03+.</p>
</li>
<li>
<p>kubectl version v1.11.3+.</p>
</li>
<li>
<p>Access to a Kubernetes v1.11.3+ cluster.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_to_deploy_on_the_cluster">To Deploy on the cluster</h4>
<div class="paragraph">
<p><strong>Build and push your image to the location specified by <code>IMG</code>:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make docker-build docker-push IMG=&lt;some-registry&gt;/watcher-operator:tag</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>NOTE:</strong> This image ought to be published in the personal registry you specified.
And it is required to have access to pull the image from the working environment.
Make sure you have the proper permission to the registry if the above commands don&#8217;t work.</p>
</div>
<div class="paragraph">
<p><strong>Install the CRDs into the cluster:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make install</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Deploy the Manager to the cluster with the image specified by <code>IMG</code>:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make deploy IMG=&lt;some-registry&gt;/watcher-operator:tag</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>NOTE</strong>: If you encounter RBAC errors, you may need to grant yourself cluster-admin
privileges or be logged in as admin.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Create instances of your solution</strong>
You can apply the samples (examples) from the config/sample:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">kubectl apply -k config/samples/</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>NOTE</strong>: Ensure that the samples has default values to test it out.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="_to_uninstall">To Uninstall</h4>
<div class="paragraph">
<p><strong>Delete the instances (CRs) from the cluster:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">kubectl delete -k config/samples/</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Delete the APIs(CRDs) from the cluster:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make uninstall</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>UnDeploy the controller from the cluster:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make undeploy</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_to_deploy_via_olm">To Deploy via OLM</h4>
<div class="paragraph">
<p>**Deploy watcher-operator via olm</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make watcher</code></pre>
</div>
</div>
<div class="paragraph">
<p>**Deply watcher-operator via olm with different catalog image</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make watcher CATALOG_IMAGE=&lt;catalog image url with tag&gt;</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_to_deploy_watcher_service">To Deploy watcher service</h5>
<div class="paragraph">
<p>**Deploy watcher service</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make watcher_deploy</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_to_uninstall_olm_deployed_watcher_operator">To Uninstall OLM deployed watcher-operator</h4>
<div class="paragraph">
<p>**Undeploy watcher service</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make watcher_deploy_cleanup</code></pre>
</div>
</div>
<div class="paragraph">
<p>**Uninstall watcher-operator</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make watcher_cleanup</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_distribution">Project Distribution</h3>
<div class="paragraph">
<p>Following are the steps to build the installer and distribute this project to users.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build the installer for the image built and published in the registry:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">make build-installer IMG=&lt;some-registry&gt;/watcher-operator:tag</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The makefile target mentioned above generates an <em>install.yaml</em>
file in the dist directory. This file contains all the resources built
with Kustomize, which are necessary to install this project without
its dependencies.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using the installer</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Users can just run kubectl apply -f <URL for="" YAML="" BUNDLE="">to install the project, i.e.:</URL></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">kubectl apply -f https://raw.githubusercontent.com/&lt;org&gt;/watcher-operator/&lt;tag or branch&gt;/dist/install.yaml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contributing">Contributing</h3>
<div class="paragraph">
<p><strong>NOTE:</strong> Run <code>make help</code> for more information on all potential <code>make</code> targets</p>
</div>
<div class="paragraph">
<p>More information can be found via the <a href="https://book.kubebuilder.io/introduction.html">Kubebuilder Documentation</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_license">License</h3>
<div class="paragraph">
<p>Copyright 2024.</p>
</div>
<div class="paragraph">
<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://www.apache.org/licenses/LICENSE-2.0</pre>
</div>
</div>
<div class="paragraph">
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_installation_guide">User Installation Guide</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_watcher_operator_installation">Watcher operator installation</h3>
<div class="paragraph">
<p>The watcher-operator is now integrated in openstack-operator. The
installation of the operator is now part of the installation of the
OpenStack Operator. For details about the deployment consult the
<a href="https://openstack-k8s-operators.github.io/openstack-operator/">OpenStack k8s Operators documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_watcher_service_deployment">Watcher service deployment</h3>
<div class="paragraph">
<p>The deployment of the Watcher service is performed as part of the
OpenStackControlplane Custom Resource. A Watcher service section
exist to enable and configure the different aspects of the service.</p>
</div>
<div class="paragraph">
<p>A default watcher service deployment can be done by just adding
following content to your <strong>OpenStackControlPlane Custom Resource
spec</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">  watcher:
    enabled: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>For additional details and existing parameters in the watcher service
check the <a href="https://openstack-k8s-operators.github.io/openstack-operator/ctlplane/index.html#watchersection">WatcherSection</a>
and <a href="https://openstack-k8s-operators.github.io/openstack-operator/ctlplane/index.html#watcherspeccore">WatcherSpecCore</a>
sections of the documentation.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Watcher requires that the <strong>OpenStackControlPlane</strong> has
Telemetry service enabled, including the MetricStorage system which
provides the Prometheus backend and metrics required by Watcher.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_workflow">Example Workflow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section takes you through two example workflows using <code>Watcher</code> to go through
optimization scenarios. The first workflow, <em>instances consolidation in minimal compute
nodes</em> uses the CLI. The second workflow, <em>workload stabilization</em>,
uses <code>Horizon</code> UI and Prometheus metrics dashboards.</p>
</div>
<div class="sect2">
<h3 id="_requirements">Requirements</h3>
<div class="paragraph">
<p>The example requires that the following setup is in place:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An OpenStack operators-based deployment with two or more Compute nodes</p>
</li>
<li>
<p>Nova Live migration is functional on your environment</p>
</li>
<li>
<p>Watcher has been deployed following the instructions in the User Installation Guide</p>
</li>
<li>
<p>Instances (Virtual Machines) have been created on the Compute nodes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Test instances can be created using the <code>deploy-instance-demo.sh</code> script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">#!/bin/bash
#
# Copyright 2025 Red Hat Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#

#
# Instructions to delete what is created in demo project
#
#  oc rsh openstackclient
#  unset OS_CLOUD
#  . ./demorc
#  openstack server delete test_0
#  If more that one were created, delete them
#  openstack router delete priv_router
#  openstack subnet delete priv_sub_demo
#  openstack network delete private_demo
#  openstack security group delete basic
#  openstack image delete cirros
#  export OS_CLOUD=default
#  openstack project delete demo
#


set -ex

# Create Image
IMG=cirros-0.5.2-x86_64-disk.img
URL=http://download.cirros-cloud.net/0.5.2/$IMG
DISK_FORMAT=qcow2
RAW=$IMG
NUMBER_OF_INSTANCES=${1:-1}

openstack project show demo || \
    openstack project create demo
openstack role add --user admin --project demo member

openstack network show public || openstack network create public --external --provider-network-type flat --provider-physical-network datacentre
openstack subnet show public_subnet || openstack subnet create public_subnet --subnet-range &lt;PUBLIC SUBNET CIDR&gt; --allocation-pool start=&lt;START PUBLIC SUBNET ADDRESSES RANGE&gt;,end=&lt;END PUBLIC SUBNET ADDRESSES RANGE&gt; --gateway &lt;PUBLIC NETWORK GATEWAY IP&gt; --dhcp --network public

# Create flavor
openstack flavor show m1.small || \
    openstack flavor create --ram 512 --vcpus 1 --disk 1 --ephemeral 1 m1.small

# Use the demo project from now on
unset OS_CLOUD
cp cloudrc demorc
sed -i 's/OS_PROJECT_NAME=admin/OS_PROJECT_NAME=demo/' demorc
. ./demorc

curl -L -# $URL &gt; /tmp/$IMG
if type qemu-img &gt;/dev/null 2&gt;&amp;1; then
    RAW=$(echo $IMG | sed s/img/raw/g)
    qemu-img convert -f qcow2 -O raw /tmp/$IMG /tmp/$RAW
    DISK_FORMAT=raw
fi

openstack image show cirros || \
    openstack image create --container-format bare --disk-format $DISK_FORMAT cirros &lt; /tmp/$RAW

# Create networks
openstack network show private_demo || openstack network create private_demo
openstack subnet show priv_sub_demo || openstack subnet create priv_sub_demo --subnet-range 192.168.0.0/24 --network private_demo
openstack router show priv_router || {
    openstack router create priv_router
    openstack router add subnet priv_router priv_sub_demo
    openstack router set priv_router --external-gateway public
}

# Create security group and icmp/ssh rules
openstack security group show basic || {
    openstack security group create basic
    openstack security group rule create basic --protocol icmp --ingress --icmp-type -1
    openstack security group rule create basic --protocol tcp --ingress --dst-port 22
}

# Create an instance
for (( i=0; i&lt;${NUMBER_OF_INSTANCES}; i++ )); do
    NAME=test_${i}
    openstack server show ${NAME} || {
        openstack server create --flavor m1.small --image cirros --nic net-id=private_demo ${NAME} --security-group basic --wait
        fip=$(openstack floating ip create public -f value -c floating_ip_address)
        openstack server add floating ip ${NAME} $fip
    }
    openstack server list --long

done</code></pre>
</div>
</div>
<div class="paragraph">
<p>and modifying the script for your environment and deploy test instances as
shown with the example commands below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># Modify the openstack subnet create public_subnet command options
# to your particular environment.

# This example uses 8 instances.
# Adjust the number per the number of instances to be used
# in the test environment
oc cp deploy-instance-demo.sh openstackclient:/home/cloud-admin
oc rsh openstackclient bash /home/cloud-admin/deploy-instance-demo.sh 8</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can check which hosts the VMs have been deployed on using the <code>--long</code> option
on the <code>openstack server list</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ oc rsh openstackclient openstack server list --project demo \
--long -c 'Name' -c 'Status' -c 'Host'
+--------+--------+-------------------------------+
| Name   | Status | Host                          |
+--------+--------+-------------------------------+
| test_7 | ACTIVE | compute1.ctlplane.localdomain |
| test_6 | ACTIVE | compute2.ctlplane.localdomain |
| test_5 | ACTIVE | compute1.ctlplane.localdomain |
| test_4 | ACTIVE | compute2.ctlplane.localdomain |
| test_3 | ACTIVE | compute1.ctlplane.localdomain |
| test_2 | ACTIVE | compute2.ctlplane.localdomain |
| test_1 | ACTIVE | compute1.ctlplane.localdomain |
| test_0 | ACTIVE | compute1.ctlplane.localdomain |
+--------+--------+-------------------------------+</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_watcher_workflow_cli">Watcher Workflow (CLI)</h3>
<div class="sect3">
<h4 id="_optimization_scenario_i_instances_consolidation_in_minimal_compute_nodes">Optimization Scenario I: Instances Consolidation in Minimal Compute Nodes</h4>
<div class="paragraph">
<p>Information on the Watcher Strategies is available in the Openstack documentation.
The server consolidation strategy is explained in the
<a href="https://docs.openstack.org/watcher/2024.2/strategies/basic-server-consolidation.html">strategies documentation</a>.</p>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>The steps below are all executed from the <code>openstackclient</code> pod.
Run <code>oc rsh openstackclient</code> to access the <code>openstackclient</code> pod before beginning the workflow steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code>Audit Template</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize audittemplate create -s node_resource_consolidation \
AuditTemplateNodeConsolidation server_consolidation
+-------------+--------------------------------------+
| Field       | Value                                |
+-------------+--------------------------------------+
| UUID        | 4b80a46d-d6e3-401a-a615-d8d1d5c3ec1b |
| Created At  | 2025-02-11T16:16:54.797663+00:00     |
| Updated At  | None                                 |
| Deleted At  | None                                 |
| Description | None                                 |
| Name        | AuditTemplateNodeConsolidation       |
| Goal        | server_consolidation                 |
| Strategy    | node_resource_consolidation          |
| Audit Scope | []                                   |
+-------------+--------------------------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check that <code>Audit Template</code> has been created with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize audittemplate list -c 'UUID' -c 'Goal' -c 'Strategy'
+--------------------------------------+----------------------+-----------------------------+
| UUID                                 | Goal                 | Strategy                    |
+--------------------------------------+----------------------+-----------------------------+
| 4b80a46d-d6e3-401a-a615-d8d1d5c3ec1b | server_consolidation | node_resource_consolidation |
+--------------------------------------+----------------------+-----------------------------+</code></pre>
</div>
</div>
</li>
<li>
<p>Now create the Audit</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize audit create -a AuditTemplateNodeConsolidation -t ONESHOT \
--name node_server_consolidation-PoC
+---------------+--------------------------------------+
| Field         | Value                                |
+---------------+--------------------------------------+
| UUID          | 19ae8e21-3185-4366-96e3-ed04184234e8 |
| Name          | node_server_consolidation-PoC        |
| Created At    | 2025-02-11T16:19:41.454788+00:00     |
| Updated At    | None                                 |
| Deleted At    | None                                 |
| State         | PENDING                              |
| Audit Type    | ONESHOT                              |
| Parameters    | {'host_choice': 'auto'}              |
| Interval      | None                                 |
| Goal          | server_consolidation                 |
| Strategy      | node_resource_consolidation          |
| Audit Scope   | []                                   |
| Auto Trigger  | False                                |
| Next Run Time | None                                 |
| Hostname      | None                                 |
| Start Time    | None                                 |
| End Time      | None                                 |
| Force         | False                                |
+---------------+--------------------------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify the <code>Audit</code> was created with the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize audit list -c 'UUID' -c 'Name' -c 'Audit Type' -c 'State'
+--------------------------------------+-------------------------------+------------+-----------+
| UUID                                 | Name                          | Audit Type | State     |
+--------------------------------------+-------------------------------+------------+-----------+
| 19ae8e21-3185-4366-96e3-ed04184234e8 | node_server_consolidation-PoC | ONESHOT    | SUCCEEDED |
+--------------------------------------+-------------------------------+------------+-----------+</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note</strong> that you are looking for the <code>State</code> to show <code>SUCCEEDED</code>.</p>
</div>
</li>
<li>
<p>Now check the <code>Action Plan</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize actionplan list  -c 'UUID' -c 'State' -c 'Global efficacy'
+--------------------------------------+-------------+-------------------------------+
| UUID                                 | State       | Global efficacy               |
+--------------------------------------+-------------+-------------------------------+
| dfdcb491-89c5-4c07-a5ed-65d2085c488c | RECOMMENDED | Released_nodes_ratio: 50.00 % |
|                                      |             |                               |
+--------------------------------------+-------------+-------------------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note</strong> that the <code>State</code> is <code>RECOMMENDED</code> and the <code>Global efficacy</code> shows <code>Released_nodes_ratio: 50.00 %</code>.
This indicates that implementing this Action Plan will empty 50% of the Compute nodes.</p>
</div>
</li>
<li>
<p>List the actions inside this <code>Action Plan</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># dfdcb491-89c5-4c07-a5ed-65d2085c488c is the UUID of the Action Plan
$ openstack optimize action list --action-plan dfdcb491-89c5-4c07-a5ed-65d2085c488c \
-c 'UUID' -c 'State' -c 'Action'
+--------------------------------------+-----------+---------------------------+
| UUID                                 | State     | Action                    |
+--------------------------------------+-----------+---------------------------+
| 01774d02-00a9-4f34-a6f7-6b2264b8970c | PENDING   | change_nova_service_state |
| 8573aa4e-6fac-4002-8de6-569e72d4dca3 | PENDING   | migrate                   |
| 6d88ea4a-012b-4cb8-af86-8e699c6c2738 | PENDING   | migrate                   |
| fa2827c6-78f8-48b8-8f8a-734b9f170841 | PENDING   | migrate                   |
| 4009c44d-9af6-4a6e-91dd-96bd4f17abd5 | PENDING   | migrate                   |
| e3dc2dec-74fc-4f16-b76d-c4b99acb1b01 | PENDING   | change_nova_service_state |
+--------------------------------------+-----------+---------------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>Listed above you will see that the <code>Action Plan</code> has 5 actions.
You can see the details of each <code>Action</code> with using with:
<code>$ openstack optimize action show &lt; Action UUID &gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize action show 8573aa4e-6fac-4002-8de6-569e72d4dca3 \
--max-width=72
+-------------+--------------------------------------------------------+
| Field       | Value                                                  |
+-------------+--------------------------------------------------------+
| UUID        | 8573aa4e-6fac-4002-8de6-569e72d4dca3                   |
| Created At  | 2025-02-11T16:19:44+00:00                              |
| Updated At  | None                                                   |
| Deleted At  | None                                                   |
| Parents     | ['01774d02-00a9-4f34-a6f7-6b2264b8970c']               |
| State       | PENDING                                                |
| Action Plan | dfdcb491-89c5-4c07-a5ed-65d2085c488c                   |
| Action      | migrate                                                |
| Parameters  | {'migration_type': 'live', 'source_node':              |
|             | 'compute1.ctlplane.localdomain', 'resource_name':      |
|             | 'test_7', 'resource_id':                               |
|             | '0cbda264-b496-4649-ab55-9405984092e9'}                |
| Description | Moving a VM instance from source_node to               |
|             | destination_node                                       |
+-------------+--------------------------------------------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Action Plan</code> is disabling the Compute node which is going to be freed,
then it will migrate the three instances running on it,
and finally it will enable the Compute node again to make sure it is available for new workloads if needed.</p>
</div>
</li>
<li>
<p>Now you are ready to execute <code>Action Plan</code> using the command:
<code>$ openstack optimize actionplan start &lt;Action Plan UUID&gt;</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize actionplan start dfdcb491-89c5-4c07-a5ed-65d2085c488c \
--max-width=72
+---------------------+------------------------------------------------+
| Field               | Value                                          |
+---------------------+------------------------------------------------+
| UUID                | dfdcb491-89c5-4c07-a5ed-65d2085c488c           |
| Created At          | 2025-02-11T16:19:44+00:00                      |
| Updated At          | 2025-02-11T16:38:36+00:00                      |
| Deleted At          | None                                           |
| Audit               | 19ae8e21-3185-4366-96e3-ed04184234e8           |
| Strategy            | node_resource_consolidation                    |
| State               | PENDING                                        |
| Efficacy indicators | [{'name': 'compute_nodes_count',               |
|                     | 'description': 'The total number of enabled    |
|                     | compute nodes.', 'unit': None, 'value': 2.0},  |
|                     | {'name': 'released_compute_nodes_count',       |
|                     | 'description': 'The number of compute nodes    |
|                     | to be released.', 'unit': None, 'value': 1.0}, |
|                     | {'name': 'instance_migrations_count',          |
|                     | 'description': 'The number of VM migrations    |
|                     |to be performed.', 'unit': None, 'value': 4.0}] |
| Global efficacy     | [{'name': 'released_nodes_ratio',              |
|                     | 'description': 'Ratio of released compute      |
|                     | nodes divided by the total number of enabled   |
|                     | compute nodes.', 'unit': '%', 'value': 50.0}]  |
| Hostname            | None                                           |
+---------------------+------------------------------------------------+</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, you can monitor the <code>Action Plan</code> progress and check the results.
You can track the status of each action in the plan with:
<code>$ openstack optimize action list --action-plan &lt;Action Plan UUID&gt;</code>.
After some time, all the actions should report <code>SUCCEEDED</code> state as shown
in an example below:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize action list --action-plan dfdcb491-89c5-4c07-a5ed-65d2085c488c \
-c 'UUID' -c 'State' -c 'Action'
+--------------------------------------+-----------+---------------------------+
| UUID                                 | State     | Action                    |
+--------------------------------------+-----------+---------------------------+
| 01774d02-00a9-4f34-a6f7-6b2264b8970c | SUCCEEDED | change_nova_service_state |
| 8573aa4e-6fac-4002-8de6-569e72d4dca3 | SUCCEEDED | migrate                   |
| 6d88ea4a-012b-4cb8-af86-8e699c6c2738 | SUCCEEDED | migrate                   |
| fa2827c6-78f8-48b8-8f8a-734b9f170841 | SUCCEEDED | migrate                   |
| 4009c44d-9af6-4a6e-91dd-96bd4f17abd5 | SUCCEEDED | migrate                   |
| e3dc2dec-74fc-4f16-b76d-c4b99acb1b01 | SUCCEEDED | change_nova_service_state |
+--------------------------------------+-----------+---------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can check that the instances have been actually consolidated in one of your hosts by
listing the instances (VMs) on each one of your hypervisors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># List the hypervisors:
$ openstack hypervisor list -c 'Hypervisor Hostname' -c 'State'
+-------------------------------+-------+
| Hypervisor Hostname           | State |
+-------------------------------+-------+
| compute2.ctlplane.localdomain | up    |
| compute1.ctlplane.localdomain | up    |
+-------------------------------+-------+
+
# Note that the output below lists all instances on one host:
$ openstack server list --long -c Name -c 'Host' --project demo
+--------+-------------------------------+
| Name   | Host                          |
+--------+-------------------------------+
| test_7 | compute2.ctlplane.localdomain |
| test_6 | compute2.ctlplane.localdomain |
| test_5 | compute2.ctlplane.localdomain |
| test_4 | compute2.ctlplane.localdomain |
| test_3 | compute2.ctlplane.localdomain |
| test_2 | compute2.ctlplane.localdomain |
| test_1 | compute2.ctlplane.localdomain |
| test_0 | compute2.ctlplane.localdomain |
+--------+-------------------------------+</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_watcher_workflow_horizon_dashboard_ui">Watcher Workflow (Horizon Dashboard UI)</h3>
<div class="sect3">
<h4 id="_optimization_scenario_ii_workload_balancingstabilization">Optimization Scenario II: Workload balancing/stabilization</h4>
<div class="paragraph">
<p>This workflow is demonstrated through actions in the <code>Horizon UI</code>.
Example screenshots are added where necessary to further explain the user flow.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Login in the <code>Horizon</code> dashboard with credentials which would enable the <code>Admin</code>
role in one or more projects.</p>
</li>
<li>
<p>Make sure you have the <code>Administration</code> menu enabled by selecting the project
where you have the <code>Admin</code> role assigned in the Projects tab:</p>
<div class="imageblock">
<div class="content">
<img src="images/admin_role.png" alt="admin role"/>
</div>
</div>
</li>
<li>
<p>In the Admin menu a new panel <code>Optimization</code> should be available:</p>
<div class="imageblock">
<div class="content">
<img src="images/optimize_menu.png" alt="optimize menu"/>
</div>
</div>
</li>
<li>
<p>In the <code>Audit Templates</code> panel, click on <code>Create Template</code> button. This will open a
<code>Create Audit Template</code> window. Add a new <code>Audit Template</code> called <strong>AuditTemplateWorkloadStabilization</strong>
with the goal <strong>Workload Balancing</strong> and the Strategy <strong>Workload stabilization</strong>.
Further information on the <code>Workload stabilization</code> strategy is available in the
<a href="https://docs.openstack.org/watcher/2024.2/strategies/workload-stabilization.html">Workload stabilization strategy reference</a>.</p>
<div class="imageblock">
<div class="content">
<img src="images/audit_template.png" alt="audit template"/>
</div>
</div>
</li>
<li>
<p>In the <code>Audit</code> panel, click on the <strong>Create Audit</strong> button. This will bring up the
<code>Create Audit</code> window. Select the <strong>AuditTemplateWorkloadStabilization</strong> <code>Audit Template</code>,
the <strong>CONTINUOUS</strong> <code>Audit Type</code>. In the <strong>Interval</strong> field, set the value to <strong>180</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="images/audit.png" alt="audit"/>
</div>
</div>
<div class="paragraph">
<p>Click on the <strong>Create Audit</strong> button and a new <code>Audit</code> will be shown.</p>
</div>
</li>
<li>
<p>Click on the <strong>UUID</strong> of the <code>Audit</code> listed and you will find the <code>Action Plans</code> created
for the new Audit. Given the low usage of resources in the instances created for the example
workflows, the initial <code>Action Plan</code> will not have real actions.</p>
</li>
<li>
<p>Increase CPU consumption in one of the created instances (VMs).
You can view the list of instances in <code>Horizon</code> by selecting the <strong>Instances</strong> panel from the menus:
<strong>Admin</strong> &#8594; <strong>Compute</strong> &#8594; <strong>Instances</strong>.
Click on the name of one of the instances, and go to the <strong>Console</strong> tab for that instance.
Log in with <code>cirros</code> user and the <code>gocubsgo</code> password, and run following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ dd if=/dev/random of=/dev/null</code></pre>
</div>
</div>
<div class="paragraph">
<p>After a few minutes, the CPU usage of the edited instance should increase up to close to 100%.
This increase will be seen in the instance metrics show in the Prometheus metrics URL.</p>
</div>
</li>
<li>
<p>Go back to <code>Audit</code> panel by through menu options: <strong>Admin</strong> &#8594; <strong>Optimization</strong> &#8594; <strong>Audit</strong>.
Click on the UUID of the continuous <code>Audit</code>. The next execution of the <code>Audit</code> should generate
a non-empty <code>Action Plan</code> with a <strong>RECOMMENDED</strong> status.
Depending on specific resources, it may take one or two executions of the <code>Audit</code>
to create this non-empty plan.</p>
<div class="imageblock">
<div class="content">
<img src="images/recommended_plan.png" alt="recommended plan"/>
</div>
</div>
</li>
<li>
<p>Click on the <strong>RECOMMENDED</strong> <code>Action Plan</code>, there should be a <strong>Migrate</strong> <code>Action</code> listed.
Click on the <code>Action</code> to see the related details. The <strong>resource_name</strong> field should
match name of the instance where you logged in and ran the <code>dd</code> command.</p>
<div class="imageblock">
<div class="content">
<img src="images/action_migrate.png" alt="action migrate"/>
</div>
</div>
</li>
<li>
<p>Go back to the list of <code>Action Plans</code>, and click the <strong>Start Action Plan</strong> button for
the RECOMMENDED plan. Click on the <code>Action Plan</code> UUID to track the status until it goes
to <strong>SUCCEEDED</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="images/plan_succeeded.png" alt="plan succeeded"/>
</div>
</div>
</li>
<li>
<p>Check the distribution of the test instances over the hosts using the
<code>openstack server list --long</code> command. You should see that the instance
where the load was increased, has moved.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack server list --long -c Name -c 'Host' --project demo
+--------+-------------------------------+
| Name   | Host                          |
+--------+-------------------------------+
| test_7 | compute1.ctlplane.localdomain |
| test_6 | compute2.ctlplane.localdomain |
| test_5 | compute2.ctlplane.localdomain |
| test_4 | compute2.ctlplane.localdomain |
| test_3 | compute2.ctlplane.localdomain |
| test_2 | compute2.ctlplane.localdomain |
| test_1 | compute2.ctlplane.localdomain |
| test_0 | compute2.ctlplane.localdomain |
+--------+-------------------------------+</code></pre>
</div>
</div>
</li>
<li>
<p>Stop the <strong>CONTINUOUS</strong> <code>Audit</code> from the <code>Audits</code> panel and select <strong>Cancel Action</strong>.
If this option is not available from <code>Horizon</code> in your environment, you can execute
it using the CLI:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ openstack optimize audit update &lt;audit uuid&gt; replace state=CANCELLED</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-28 16:04:03 UTC
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/languages/yaml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/languages/bash.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>